/* script.js */

let cart = [];
let currentService = '';

const productsDB = {
  'Supermarket': [
    {name: 'Rice', price: 30},
    {name: 'Milk', price: 15},
    {name: 'Bread', price: 10}
  ],
  'Pharmacy': [
    {name: 'Paracetamol', price: 20},
    {name: 'Vitamin C', price: 25}
  ],
  'Fruits & Vegetables': [
    {name: 'Apple', price: 5},
    {name: 'Tomato', price: 3}
  ],
  'Restaurants': [
    {name: 'Burger', price: 50},
    {name: 'Pizza', price: 80}
  ]
};

function openProducts(service) {
  currentService = service;
  document.getElementById('services-page').style.display = 'none';
  document.getElementById('products-page').style.display = 'block';
  document.getElementById('service-title').innerText = service + ' Products';

  const list = document.getElementById('product-list');
  list.innerHTML = '';
  productsDB[service].forEach((p, i) => {
    const div = document.createElement('div');
    div.innerHTML = `${p.name} - ${p.price} EGP <button onclick="addToCart('${p.name}', ${p.price})">Add</button>`;
    list.appendChild(div);
  });
}

function addToCart(name, price) {
  cart.push({name, price});
  alert(name + ' added to cart');
}

function goToCart() {
  document.getElementById('products-page').style.display = 'none';
  document.getElementById('cart-page').style.display = 'block';
  updateCart();
}

function updateCart() {
  const list = document.getElementById('cart-list');
  list.innerHTML = '';
  let total = 0;
  cart.forEach((item, i) => {
    total += item.price;
    const div = document.createElement('div');
    div.innerHTML = `${item.name} - ${item.price} EGP <button onclick="removeFromCart(${i})">Remove</button>`;
    list.appendChild(div);
  });
  document.getElementById('cart-total').innerText = total;
  document.getElementById('payment-total').innerText = total;
}

function removeFromCart(index) {
  cart.splice(index, 1);
  updateCart();
}

function goToTracking() {
  document.getElementById('cart-page').style.display = 'none';
  document.getElementById('tracking-page').style.display = 'block';
}

function goToPayment() {
  document.getElementById('tracking-page').style.display = 'none';
  document.getElementById('payment-page').style.display = 'block';
}

function completePayment() {
  alert('Payment completed! Thank you for your order.');
  location.reload();
}
